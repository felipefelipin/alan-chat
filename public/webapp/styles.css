:root{
  --bg:#0b141a;              /* whatsapp dark base */
  --panel:#111b21;           /* top bars */
  --panel2:#0f1a20;
  --bubbleA:#202c33;         /* left bubble */
  --bubbleB:#005c4b;         /* right bubble */
  --text:#e9edef;
  --muted:#8696a0;
  --line:rgba(255,255,255,.08);
  --accent:#00a884;          /* whatsapp green */
  --accent2:#25d366;
  --shadow:0 10px 30px rgba(0,0,0,.45);

  /* wallpaper tile (coloque o png em public/assets/chat-bg.png) */
  --wall:url("/assets/chat-bg.png");
}

*{box-sizing:border-box}
html,body{
  height:100%;
}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* --- layout base --- */
.full{
  width:100vw;
  height:100vh;
  display:flex;
  flex-direction:column;
  background:var(--bg);
  overflow:hidden;
}

/* cinematic entry */
.fadeIn{
  animation: fadeIn .22s ease both;
}
@keyframes fadeIn{
  from{opacity:0; filter:blur(7px); transform:scale(1.01)}
  to{opacity:1; filter:blur(0); transform:scale(1)}
}

/* --- iOS safe area + faux statusbar --- */
.statusbar{
  height:28px;
  padding:6px 12px 0;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  background:var(--panel);
  border-bottom:1px solid rgba(255,255,255,.04);
  padding-top: calc(6px + env(safe-area-inset-top));
}
#sbTime{
  font-weight:700;
  font-size:12px;
  letter-spacing:.02em;
  color:rgba(233,237,239,.92);
}
.sbIcons{
  display:flex;
  align-items:center;
  gap:8px;
  opacity:.9;
}
.sbSignal,.sbWifi,.sbBattery{
  display:inline-block;
  height:10px;
  border-radius:3px;
}
.sbSignal{ width:14px; background:rgba(233,237,239,.75); clip-path: polygon(0 100%, 0 60%, 25% 60%, 25% 100%, 35% 100%, 35% 40%, 60% 40%, 60% 100%, 70% 100%, 70% 20%, 100% 20%, 100% 100%); }
.sbWifi{ width:14px; background:rgba(233,237,239,.65); clip-path: polygon(50% 100%, 0 35%, 12% 20%, 50% 65%, 88% 20%, 100% 35%); }
.sbBattery{
  width:18px;
  border:1px solid rgba(233,237,239,.75);
  position:relative;
}
.sbBattery:before{
  content:"";
  position:absolute;
  left:2px; top:2px; bottom:2px;
  width:65%;
  background:rgba(37,211,102,.85);
  border-radius:2px;
}
.sbBattery:after{
  content:"";
  position:absolute;
  right:-3px; top:3px; bottom:3px;
  width:2px;
  background:rgba(233,237,239,.75);
  border-radius:2px;
}

/* --- top bar (whatsapp style) --- */
.topbar{
  height:56px;
  display:flex;
  align-items:center;
  gap:12px;
  padding:10px 14px;
  background:var(--panel);
  border-bottom:1px solid rgba(255,255,255,.05);
}

.avatar{
  width:38px;
  height:38px;
  border-radius:50%;
  background:#2a3942;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  letter-spacing:.02em;
  color:rgba(233,237,239,.92);
}

.titlebox{
  display:flex;
  flex-direction:column;
  line-height:1.05;
}
.name{
  font-weight:900;
  font-size:15px;
}
.status{
  font-size:12px;
  color:var(--muted);
  margin-top:2px;
}

/* --- chat background (wallpaper) --- */
.chat{
  flex:1;
  overflow:auto;
  padding:14px 12px 92px;
  background-color:var(--bg);
  background-image: var(--wall);
  background-repeat: repeat;
  background-size: 512px 512px;
  background-attachment: scroll;
}

/* --- message rows --- */
.row{
  display:flex;
  margin:10px 0;
}
.row.left{justify-content:flex-start}
.row.right{justify-content:flex-end}

.bubble{
  max-width:min(78%, 520px);
  border-radius:16px;
  padding:10px 12px;
  border:1px solid rgba(255,255,255,.06);
  background:var(--bubbleA);
  box-shadow: 0 1px 0 rgba(0,0,0,.25);
  white-space:pre-wrap;
  position:relative;
}

/* little tails */
.row.left .bubble:before{
  content:"";
  position:absolute;
  left:-6px;
  top:10px;
  width:12px;
  height:12px;
  background:var(--bubbleA);
  border-left:1px solid rgba(255,255,255,.06);
  border-bottom:1px solid rgba(255,255,255,.06);
  transform: rotate(45deg);
}
.row.right .bubble{
  background:var(--bubbleB);
  border-color: rgba(0,0,0,.12);
}
.row.right .bubble:before{
  content:"";
  position:absolute;
  right:-6px;
  left:auto;
  top:10px;
  width:12px;
  height:12px;
  background:var(--bubbleB);
  border-right:1px solid rgba(0,0,0,.12);
  border-bottom:1px solid rgba(0,0,0,.12);
  transform: rotate(-45deg);
}

.meta{
  margin-top:6px;
  font-size:11px;
  color:rgba(134,150,160,.95);
  text-align:right;
}

/* --- typing bubble --- */
.typing{
  display:inline-flex;
  gap:6px;
  align-items:center;
  padding:10px 12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.06);
  background:rgba(32,44,51,.86);
}
.dot{
  width:6px;
  height:6px;
  border-radius:50%;
  background:rgba(233,237,239,.65);
  opacity:.35;
  animation:blink 1.15s infinite;
}
.dot:nth-child(2){animation-delay:.12s}
.dot:nth-child(3){animation-delay:.24s}
@keyframes blink{
  0%,100%{opacity:.25}
  50%{opacity:.9}
}

/* --- composer (input + send) --- */
.composer{
  position:fixed;
  left:0;
  right:0;
  bottom:0;
  padding:10px 10px calc(10px + env(safe-area-inset-bottom));
  background:rgba(11,20,26,.92);
  backdrop-filter: blur(10px);
  border-top:1px solid rgba(255,255,255,.05);
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:center;
}
.composer input{
  width:min(760px, 78vw);
  border-radius:22px;
  border:1px solid rgba(255,255,255,.06);
  background:rgba(17,27,33,.92);
  color:var(--text);
  padding:14px 14px;
  outline:none;
}
.send{
  border:0;
  border-radius:50%;
  width:46px;
  height:46px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:var(--accent);
  color:#062213;
  font-weight:900;
  cursor:pointer;
  box-shadow: 0 6px 16px rgba(0,0,0,.35);
}

/* --- video bubble --- */
.videoBubble{
  width:min(260px, 64vw);
  aspect-ratio: 16/10;
  border-radius:14px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.06);
  background:#000;
  position:relative;
}
.videoBubble video{
  width:100%;
  height:100%;
  object-fit:cover;
}
.videoHint{
  position:absolute;
  left:10px;
  bottom:8px;
  font-size:11px;
  padding:4px 8px;
  border-radius:999px;
  background:rgba(0,0,0,.45);
  border:1px solid rgba(255,255,255,.12);
  color:rgba(233,237,239,.9);
}

/* --- cards (unlock etc.) --- */
.card{
  background:rgba(17,27,33,.92);
  border:1px solid rgba(255,255,255,.07);
  border-radius:18px;
  padding:16px;
  width:min(520px, 92vw);
  box-shadow: var(--shadow);
}

/* ==========================
   PREMIUM INTRO (V3)
   ========================== */
.pIntro{
  position:fixed;
  inset:0;
  background:#000;
}
.pIntroVideoWrap{
  position:absolute;
  inset:0;
}
.pIntroVideoWrap video{
  width:100%;
  height:100%;
  object-fit:cover;
  filter: contrast(1.05) saturate(1.05);
}
.pIntroOverlay{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:flex-end;
  padding:24px 16px calc(24px + env(safe-area-inset-bottom));
  background:linear-gradient(to top, rgba(0,0,0,.82), rgba(0,0,0,.10) 58%, rgba(0,0,0,0));
  transition: opacity .35s ease;
}
.pIntroBadge{
  display:inline-flex;
  width:max-content;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.35);
  color:#fff;
  letter-spacing:.14em;
  text-transform:uppercase;
  font-size:11px;
  margin-bottom:10px;
}
.pIntroTitle{
  font-size:22px;
  font-weight:1000;
  color:#fff;
  margin-bottom:6px;
  text-shadow: 0 10px 30px rgba(0,0,0,.45);
}
.pIntroSub{
  color:rgba(255,255,255,.78);
  font-size:13px;
  margin-bottom:14px;
}
.pRow{
  display:flex;
  gap:10px;
}
.pBtnGhost{
  border:0;
  width:max-content;
  padding:12px 16px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.22);
  background:rgba(0,0,0,.35);
  color:#fff;
  font-weight:900;
  cursor:pointer;
}

.pCtaWrap{
  position:absolute;
  left:0;
  right:0;
  bottom: calc(18px + env(safe-area-inset-bottom));
  display:flex;
  justify-content:center;
  padding:0 16px;
}
.pBtnPrimary{
  width:min(520px, 92vw);
  padding:16px 18px;
  border-radius:18px;
  border:0;
  background:linear-gradient(135deg, var(--accent), var(--accent2));
  color:#062213;
  font-weight:1000;
  letter-spacing:.06em;
  text-transform:uppercase;
  cursor:pointer;
  box-shadow: 0 14px 40px rgba(0,0,0,.45);
}
.pBtnPrimary:active{
  transform: translateY(1px);
}

/* ==========================
   ROUTING OVERLAY (V3)
   ========================== */
.routeOverlay{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
  padding:16px;
}
.routeOverlay.fadeOut{
  opacity:0;
  transition:opacity .32s ease;
}
.routeBox{
  width:min(520px, 92vw);
  border-radius:18px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(10,10,10,.92);
  padding:18px 16px;
  box-shadow: var(--shadow);
  color:#fff;
}
.routeTitle{
  font-weight:1000;
  letter-spacing:.14em;
  text-transform:uppercase;
  font-size:11px;
  color:rgba(255,255,255,.86);
  margin-bottom:14px;
}
.routeLoader{
  height:2px;
  background:rgba(255,255,255,.12);
  border-radius:999px;
  overflow:hidden;
  position:relative;
  margin-bottom:12px;
}
.routeLoader:after{
  content:"";
  position:absolute;
  top:0;
  left:-30%;
  width:30%;
  height:100%;
  background:rgba(255,255,255,.85);
  animation:loadbar 1.05s infinite;
}
@keyframes loadbar{
  0%{left:-30%}
  100%{left:100%}
}
.routeSteps{
  display:flex;
  flex-direction:column;
  gap:6px;
}
.routeStep{
  font-size:14px;
  color:rgba(255,255,255,.88);
}
.routeStep .check{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:18px;
  height:18px;
  border-radius:50%;
  background:rgba(37,211,102,.18);
  color:var(--accent2);
  margin-left:6px;
  font-weight:1000;
}
.routeStep .dots{
  letter-spacing:.24em;
}

/* ==========================
   CALL SCREEN (simple)
   ========================== */
.callScreen{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  flex-direction:column;
  z-index:9998;
}
.callHeader{
  padding:18px 16px;
  display:flex;
  align-items:center;
  gap:12px;
}
.callName{font-weight:1000;font-size:20px}
.callSub{color:rgba(134,150,160,.95);font-size:13px}

.callActions{
  margin-top:auto;
  padding:18px 16px calc(26px + env(safe-area-inset-bottom));
  display:flex;
  justify-content:center;
  gap:16px;
}
.btnRed,.btnGreen{
  border:0;
  border-radius:18px;
  padding:14px 18px;
  font-weight:1000;
  cursor:pointer;
  width:min(180px, 42vw);
}
.btnRed{background:#ff3b30;color:#fff}
.btnGreen{background:#34c759;color:#062213}

/* small polish */
button:disabled{cursor:not-allowed}